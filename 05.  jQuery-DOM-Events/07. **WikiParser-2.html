<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wiki Parser</title>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"
            integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s="
            crossorigin="anonymous"></script>
</head>
<body>
<div>
    <p id="wiki">

        =Heading 1=
        This is normal text with a [[hyperlink1|piped hyperlink]]. This '''word''' should be '''bold'''.
        ==Heading 2==
        ''This is italics''. [[hyperlink]]
    </p>

</div>

<script>

    //(()=> wikiParser('#wiki'))
    window.onload = function () {
        wikiParser('#wiki')
    }
</script>

<script>

function wikiParser(selector){
	    let fixedText = $(selector).text()
	        .replace(/'''(.+?)'''/g, `<b>$1</b>`)
	        .replace(/''(.+?)''/g, `<i>$1</i>`)
	        .replace(/===(.+?)===/g, `<h3>$1</h3>`)
	        .replace(/==(.+?)==/g, `<h2>$1</h2>`)
	        .replace(/=(.+?)=/g, `<h1>$1</h1>`)
	        .replace(/\[\[([^\]\[]+?)\|([^\[\]]+?)]]/g, `<a href="/wiki/$1">$2</a>`)
	        .replace(/\[\[([^\]\[]+?)]]/g, `<a href="/wiki/$1">$1</a>`);
	    $(selector).html(fixedText);
	}

</script>
</body>
</html>
